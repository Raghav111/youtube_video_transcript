<!-- views/pages/index.ejs -->

<!DOCTYPE html>
<html lang="en">
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
<head>
    <% include ../partials/head %>
</head>
<body class="container">

    <header>
        <% include ../partials/header %>
    </header>

    <main>
        <form class="form-inline">
            <div class="form-group">
                Video URL :<label class="sr-only" for="url">Video URL:</label>
                <input type="url" class="form-control" id="url">
            </div>
            <button  id="submit" class="btn btn-default">Submit</button>
        </form>

        <!-- <div class="jumbotron">
            <h1>Youtube Subs Transcripter</h1>
            <p>Fetch transcript from youtube videos</p>
        </div> -->
        <div id="content"  class="panel panel-default">
            <div class="panel-heading">Panel Heading</div>
            <div class="panel-body">Panel Content</div>
        </div>
    </main>

    <footer>
        <% include ../partials/footer %>
    </footer>

</body>
</html>

<script>
$('#submit').click(function(event) {
   event.preventDefault();

   $.ajax({
      type: 'POST',
      url : 'http://localhost:8080/ajax',
      data :  {
          "url" : "http://video.google.com/timedtext?lang=en&v=1A_CAkYt3GY"
      },
      dataType: 'json',
      success: function(data) {
         //console.log('Hi');
         $('#content').show;
         $('.panel-heading').html(url);
         $('.panel-body').html(JSON.stringify(data));
      },
      error: function(data) {
          //console.log('Bi');
          $('#content').show;
          $('.panel-heading').html(" I failed you :( ");
          $('.panel-body').html(JSON.stringify(data));
      }
   });
});
</script>
